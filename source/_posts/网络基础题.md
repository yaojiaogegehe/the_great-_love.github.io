---
title: 网络基础题
date: 2022-11-18 12:39:29
tags:
---
一、端口概念：
TCP/IP：从0到65535，一共65536个。
<img src="/images/端口.jpg" width='80%' height='45%'/>

0到1023为固定端口，一般都是固定分配给一些服务。
比如：21(FTP服务);25(SMTP服务，简单邮件传输协议);80(HTTP协议，即为浏览网页上网协议);135(RPC协议，远程过程调用协议)
1024到65535为动态端口，不固定，许多服务都可以使用这些端口。只要有应用程序发送上网申请，系统就会随机分配一个动态端口供其使用，而在程序结束后会解除对该端口的占用。动态端口也常常被木马病毒占用，例如：
冰河默认连接端口是7626、WAY 2.4是8011、Netspy 3.0是7306、YAI病毒是1024等等。


常用端口：
21端口：21端口主要用于FTP(File Transfer Protocol，文件传输协议)服务。
22端口：22端口主要用于SSH(Secure Shell,安全壳协议)服务。
23端口：23端口主要用于Telnet（远程登录）服务，是Internet上普遍采用的登录和仿真程序。
25端口：25端口为SMTP(Simple Mail Transfer Protocol，简单邮件传输协议)服务器所开放，主要用于发送邮件，如今绝大多数邮件服务器都使用该协议。
53端口：53端口为DNS(Domain Name Server，域名服务器)服务器所开放，主要用于域名解析，DNS服务在NT系统中使用的最为广泛。
80端口：80端口是为HTTP(HyperText Transport Protocol，超文本传输协议)开放的，这是上网冲浪使用最多的协议，主要用于在WWW(World Wide Web，万维网） 服务上传输信息的协议。
443端口：443端口即网页浏览端口，主要是用于HTTPS服务，是提供加密和通过安全端口传输的另一种HTTP。
1024端口：1024端口一般不固定分配给某个服务，在英文中的解释是“Reserved”（保留）。
1080端口：1080端口是Socks代理服务使用的端口，大家平时上网使用的WWW服务使用的是HTTP协议的代理服务。
8080端口：8080端口同80端口，是被用于WWW代理服务的，可以实现浏览网页，同时也是tomcat默认端口。
3306端口：mysql默认端口。
6379端口：redis默认端口。
3389端口：Windows 2000(2003) Server远程桌面的服务端口。
7001端口：weblogic,freak88。Weblogic是用于开发、集成、部署和管理大规模分布式web应用程序、网络应用程序和数据库应用程序的Java应用服务器。

二、端口分类：
按协议类型划分，可以分为TCP、UDP、IP和ICMP（Internet控制消息协议）等端口。下面主要介绍TCP和UDP端口：
　　- TCP端口
　　TCP端口，即传输控制协议端口，需要在客户端和服务器之间建立连接，这样可以提供可靠的数据传输。常见的包括FTP服务的21端口，Telnet服务的23端口，SMTP服务的25端口，以及HTTP服务的80端口等等。
　　- UDP端口
　　UDP端口，即用户数据包协议端口，无需在客户端和服务器之间建立连接，安全性得不到保障。常见的有DNS服务的53端口，SNMP（简单网络管理协议）服务的161端口，QQ使用的8000和4000端口等等。

`注意！！！！两者都工作在传输层！！！！`


三、tcp/ip概念：
    TCP：TCP使用固定的连接，当应用程序希望通过 TCP 与另一个应用程序通信时，它会发送一个通信请求。这个请求必须被送到一个确切的地址。在双方"握手"之。TCP 将在两个应用程序之间建立一个全双工 (full-duplex) 的通信。这个全双工的通信将占用两个计算机之间的通信线路，直到它被一方或双方关闭为止。UDP 和 TCP 很相似，但是更简单，同时可靠性低于 TCP。
    IP：IP是无线的连接，是无连接的通信协议。它不会占用两个正在通信的计算机之间的通信线路。这样，IP 就降低了对网络线路的需求。每条线可以同时满足许多不同的计算机之间的通信需要。通过 IP，消息（或者其他数据）被分割为小的独立的包，并通过因特网在计算机之间传送。IP 负责将每个包路由至它的目的地。

在TCP/IP内部包含一系列用于处理数据通信的协议：

UDP (用户数据报协议) - 应用程序之间的简单通信
TCP - 传输控制协议。用于从应用程序到网络的数据传输控制。负责在数据传送之前将它们分割为 IP 包，然后在它们到达的时候将它们重组。
IP - 网际协议（Internet Protocol）负责计算机之间的通信。负责在因特网上发送和接收数据包。
HTTP - 超文本传输协议(Hyper Text Transfer Protocol)负责 web 服务器与 web 浏览器之间的通信。用于从 web 客户端（浏览器）向 web 服务器发送请求，并从 web 服务器向 web 客户端返回内容（网页）。
HTTPS - 安全的 HTTP（HTTP Secure）负责在 web 服务器和 web 浏览器之间的安全通信。作为有代表性的应用，HTTPS 会用于处理信用卡交易和其他的敏感数据。
SSL - 安全套接字层（Secure Sockets Layer）协议用于为安全数据传输加密数据。
SMTP - 简易邮件传输协议（Simple Mail Transfer Protocol）用于电子邮件的传输。
MIME - 多用途因特网邮件扩展（Multi-purpose Internet Mail Extensions）协议使 SMTP 有能力通过 TCP/IP 网络传输多媒体文件，包括声音、视频和二进制数据。
IMAP - 因特网消息访问协议（Internet Message Access Protocol）用于存储和取回电子邮件。
POP - 邮局协议（Post Office Protocol）用于从电子邮件服务器向个人电脑下载电子邮件。
FTP - 文件传输协议（File Transfer Protocol）负责计算机之间的文件传输。
NTP - 网络时间协议（Network Time Protocol）用于在计算机之间同步时间（钟）。
DHCP - 动态主机配置协议（Dynamic Host Configuration Protocol）用于向网络中的计算机分配动态 IP 地址。
SNMP - 简单网络管理协议（Simple Network Management Protocol）用于计算机网络的管理。
LDAP - 轻量级的目录访问协议（Lightweight Directory Access Protocol）用于从因特网搜集关于用户和电子邮件地址的信息。
ICMP - 因特网消息控制协议（Internet Control Message Protocol）负责网络中的错误处理。
ARP - 地址解析协议（Address Resolution Protocol）用于通过 IP 来查找基于 IP 地址的计算机网卡的硬件地址。
RARP - 反向地址转换协议（Reverse Address Resolution Protocol）用于通过 IP 查找基于硬件地址的计算机网卡的 IP 地址。
BOOTP - 自举协议（Boot Protocol）用于从网络启动计算机。
PPTP - 点对点隧道协议（Point to Point Tunneling Protocol）用于私人网络之间的连接（隧道）。

TCP/IP三次握手与四次挥手：
SYN：同步位，SYN等于1表示进行一个连接请求
ACK：确认位，等于1确认有效，等于0则确认无效
ack是确认号，表示对方收到ACK后发回来的序号+1
seq是序号

    三次握手：
        第一次握手：
            客户端向服务器主动发起请求，SYN=1和seq=x。（其中x是客户端随机生成的序号）
            第一次握手服务器确认了客户端的发送能力（服务器知道客户端能说话）；也确认了自己的接收能力（服务器自己知道自己能听到）
        第二次握手：
            服务器向客户端发送SYN=1,ACK=1,ack=x+1，seq=y。（同上，y是服务器随机生成的序号）
            第二次握手客户端收到服务器的回应，确认了自己的发送能力和接收能力（客户端知道自己能说话和听到，以及服务器能听到），同时确认了服务器的发送能力（客户端知道服务器能说话）。
        第三次握手：
            客户端向服务器发送ACK=1,ack=y+1,seq=x+1。
            第三次握手服务器收到客户端的回应，确认了自己的发送能力（服务器知道自己能说话），同时确认了客户端的接收能力（服务器知道客户端能听到）
    
FIN=1说明要断开连接
    四次挥手：
        第一次挥手：
            客户端向服务器发起请求，FIN =1，seq=u，客户端断开对服务器的连接，同时停止发送数据
        第二次挥手：
            服务器向客户端回应，ACK=1，ack=u+1，seq=v，此时服务器是半关闭状态，服务器仍旧可以对客户端发送数据
        第三次挥手：
            服务器停止向客户端发送数据，之后向客户端发起请求，FIN=1,ACK=1,ack=u+1,seq=w
        第四次挥手：
            客户端向服务器发起回应，ACK=1，ack=w+1,seq=v+1。之后就服务器就关闭了


四、OSI
OSI模型分为七层，可以用一句话来概括。
please do not tell the secret password to anyone.
    Please | 物理层（Physical Layer） 
    第一层的数据单元是比特（bit）。
    功能：七层模型中的最底层，主要是物理介质传输媒介（网线或者是无线），在不同设备中传输比特，将0/1信号与电信号或者光信号互相转化。
    对应的网络协议：IEEE 802.1A, IEEE 802.2到IEEE 802
    第一层可能碰到的问题：电缆失效，例如电线损坏或连接器损坏、网络硬件设备故障，例如电路损坏、东西正被拔出

    Do | 数据链路层（Data Link Layer）
    第二层的数据单元是帧（frame），每一帧都包括一个帧头（通常包括源节点和目的节点的 MAC 地址）、主体（由要传输的比特组成）和一个帧尾（包括错误检测信息。当检测到错误时，根据实现或网络的配置或协议，帧可能被丢弃，或者错误会被报告给上面的层，用于进一步错误校正。例如，错误检测机制的有循环冗余校验（CRC，Cyclic Redundancy Check）和帧校验序列（FCS，Frame Check Sequence））。
    功能：物理地址（MAC地址），网络设备的唯一身份标识。建立逻辑连接、进行硬件地址寻址，相邻的两个设备间的互相通信。
    对应的网络协议：FDDI, Ethernet, Arpanet, PDN, SLIP, PPP，STP。HDLC,SDLC,帧中继。
    第二层可能遇到的问题：可能在第一层上发生的所有问题、两个节点间的连接（会话）不成功、成功建立但又间歇性失败的会话、帧冲突

    Not | 网络层（Network Layer）（主力是路由器）
    第三层的数据单元是数据包。通常一个数据包包含一个帧和一个IP地址信息的包装。
    功能：进行逻辑地址寻址，实现不同网络之间的路径选择，IP就在网络层。
    对应的网络协议：IP, ICMP, ARP, RARP, AKP, UUCP。
    第三层可能遇到的问题：所有可能在之前各层中出现的问题、路由器或其它节点故障或无功能、IP 地址配置不正确

    Tell （the）| 传输层（Transport Layer）
    第四层的数据单元有好几个不同的名字，对于 TCP 而言，数据单元是数据包。对于 UDP 而言，包被称为数据报（datagram）。为了简化，我将只使用数据包这个术语
    功能：是整个网络关键的部分，是实现两个用户进程间端到端的可靠通信，处理数据包的错误等传输问题。是向下通信服务最高层，向上用户功能最底层。即向网络层提供服务，向会话层提供独立于网络层的传送服务和可靠的透明数据传输。
    对应的网络协议：TCP、UDP。
    第四层可能遇到的问题：所有可能在之前各层中出现的问题、被封锁的端口——检查你的访问控制列表（ACL，Access Control List）和防火墙、服务质量（QoS，Quality of Service）设置。QoS 是路由器/交换机的一个功能，可以对流量进行优先级排序，并且它们真的可以把事情搞砸。

    Secret | 会话层（Session Layer）
    Password （to）| 表示层（Presentation Layer）
    Anyone | 应用层（Application Layer）
